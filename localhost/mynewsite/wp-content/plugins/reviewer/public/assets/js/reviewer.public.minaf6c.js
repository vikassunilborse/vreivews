jQuery(document).ready(function($){function a(a){for(var e=window.location.search.substring(1),t=e.split("&"),r=0;r<t.length;r++){var i=t[r].split("=");if(i[0]==a)return i[1]}return!1}function e(){$(".rwp-knob").knob({readOnly:!0,thickness:.2,width:100,height:100,bgColor:"#e5e5e5",inputColor:"#3b3c3e",fontWeight:"bold"})}function t(){$(".rwp-knob-table").knob({readOnly:!0,thickness:.25,width:50,height:50,bgColor:"#e5e5e5",inputColor:"#3b3c3e",fontWeight:"bold",inline:!1})}function r(){var a;$(".rwp-slider").each(function(e){a=i($(this).data("step")),$(this).noUiSlider({step:$(this).data("step"),start:$(this).data("val"),connect:"lower",range:{min:$(this).data("min"),max:$(this).data("max")},format:wNumb({decimals:a})}),$(this).Link("lower").to($(this).parent().find("input"),null,wNumb({decimals:a}))})}function i(a){var e=parseFloat(a),t=(""+e).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return t?Math.max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0}$(".rwp-scores-sliders").length>0&&r(),$(".rwp-knob").length>0&&e(),$(".rwp-knob-table").length>0&&t();var n=a("rwpurid");n!==!1&&$(document).scrollTop($("#"+n).offset().top-10),$(".rwp-submit-ur").click(function(a){a.preventDefault();var t=$(this),r=$(this).parent().parent(),i=r.find('input[name="rwp-ur[review-id]"]').val(),n=r.find('input[name="rwp-ur[post-id]"]').val(),s=r.find('input[name="rwp-ur[user-id]"]').val(),d=r.find('input[name="rwp-ur[mode]"]').val(),p=r.find('input[name="rwp-ur[template]"]').val(),o=r.find('input[name="rwp-ur[name]"]').val();o="undefined"==typeof o?"":o;var c=r.find('input[name="rwp-ur[title]"]').val();c="undefined"==typeof c?"":c;var l=r.find('textarea[name="rwp-ur[comment]"]').val();l="undefined"==typeof l?"":l;var f=r.find('input[name="rwp-ur[captcha]"]').val();f="undefined"==typeof f?"":f;var u=r.find('input[name="rwp-ur[email]"]').val();u="undefined"==typeof u?"":u;var h;switch(d){case"five_stars":var w=r.find("input.rwp-rating:checked").val();h="undefined"==typeof w?0:w;break;case"full_five_stars":h=[];var v=r.find("input.rwp-rating:checked");0!=v.length&&v.each(function(a){var e={};e.i=$(this).data("index"),e.val=$(this).val(),h.push(e)});break;default:h=[];var v=r.find(".rwp-slider");0!=v.length&&v.each(function(a){var e={};e.i=$(this).data("index"),e.val=$(this).val(),h.push(e)})}var m={action:reviewerRatingObj.action,security:reviewerRatingObj.ajax_nonce,review_id:i,post_id:n,scores:h,user_id:s,user_name:o,user_email:u,title:c,comment:l,method:d,template:p,captcha:f},b=r.find(".rwp-loader");b.fadeIn("fast"),$.post(reviewerRatingObj.ajax_url,m,function(a){var s=r.find(".rwp-notification");switch(s.html(""),a.code){case 405:b.fadeOut("fast"),$.each(a.data,function(a,e){s.append(e+"<br/>")}),r.find(".rwp-captcha-image").attr("src",a.captcha),r.find(".rwp-captcha-input").val("");break;case 400:b.fadeOut("fast"),s.html(a.data.msg);break;case 401:b.fadeOut("fast"),s.html(a.data.msg),r.find(".rwp-captcha-image").attr("src",a.data.captcha),r.find(".rwp-captcha-input").val("");break;case 200:s.addClass("rwp-success"),s.html(a.data.msg);var d=r.find('input[name="rwp-ur[branch]"]').val();d="undefined"==typeof d?!1:!0,d?setTimeout(function(){location.reload()},1e3):$.ajax({url:"",cache:!1,context:document.body,success:function(a,t){b.fadeOut("fast");var s=$(a),d=s.find("#rwp-review-"+n+"-"+i+" .rwp-review"),p=r.parent().parent().parent().parent();p.find(".rwp-review").remove(),p.hide().append(d).fadeIn("fast"),p.find(".rwp-knob").length>0&&e()}});break;case 201:b.fadeOut("fast"),s.addClass("rwp-success"),s.html(a.data.msg);var p=t.parent();p.find("input").remove();var o=$("#rwp-ratings-form-"+n+"-"+i);o.find(".rwp-ratings-form").slideUp("fast"),o.append(p)}},"json").fail(function(a){b.fadeOut("fast"),alert("Error during rating process!")})}),$(".rwp-review-wrap").on("click",".rwp-on .rwp-like span, .rwp-on .rwp-dislike span",function(a){a.preventDefault();var e=$(this).data("rating-id"),t=$(this).data("post-id"),r=$(this).data("method"),i=$(this).data("user-id"),n=$(this).parent().parent(),s={action:reviewerLikeObj.action,security:reviewerLikeObj.ajax_nonce,rating_id:e,post_id:t,user_id:i,method:r},d=n.find(".rwp-loader");d.fadeIn("fast");var p=$(this).parent().find("em");$.post(reviewerLikeObj.ajax_url,s,function(a){switch(d.fadeOut("fast"),a.code){case 400:alert(a.data.msg);break;case 200:var e="like"==r?a.data.like:a.data.dislike;p.html(e),n.removeClass("rwp-on").addClass("rwp-off");break;default:alert("Error in like/dislike process!")}},"json").fail(function(a){d.fadeOut("fast"),alert("Error during like/dislike process!")})}),$(".rwp-review-wrap").on("click",".rwp-show-more",function(a){var e=$(this).parent().find(".rwp-users-reviews-page.rwp-hidden");e.length-1<=0&&$(this).fadeOut("fast",function(){$(this).remove()}),e.first().removeClass("rwp-hidden")}),$(".rwp-refresh-captcha-btn").click(function(a){a.preventDefault();var e=$(this).data("review-id"),t=$(this).data("post-id"),r={action:rwpCaptchaObj.action,security:rwpCaptchaObj.ajax_nonce,review_id:e,post_id:t},i=$(this).parent();$.post(rwpCaptchaObj.ajax_url,r,function(a){switch(a.code){case 400:alert(a.data.msg);break;case 200:i.find(".rwp-captcha-image").attr("src",a.captcha),i.find(".rwp-captcha-input").val("");break;default:alert("Error in like/dislike process!")}},"json").fail(function(a){loader.fadeOut("fast"),alert("Error Refreshing Captcha")})}),$(".rwp-review-wrap").on("click",".rwp-share.rwp-d",function(a){a.preventDefault();var e=$(window).height(),t=$(window).width(),r=$(this).attr("href");if(768>=t)window.open(r);else{var i=670,n=360,s=(e-n)/2,d=(t-i)/2;window.open(r,"_blank","height="+n+", width="+i+", top="+s+", left="+d+", menubar=no, resizable=yes, scrollbars=yes, status=no, titlebar=no, toolbar=no")}}),$(".rwp-review-wrap").on("click",".rwp-share.rwp-sharing-link",function(a){a.preventDefault();var e=prompt($(this).data("label"),$(this).attr("href"))})});